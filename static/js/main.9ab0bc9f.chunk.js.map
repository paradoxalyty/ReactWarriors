{"version":3,"sources":["components/MovieItem.jsx","components/MovieTabs.jsx","components/Pagination.jsx","components/App.jsx","api/api.js","index.js"],"names":["MovieItem","props","state","willWatch","this","movie","removeMovie","addMovieToWillWatch","removeMovieFromWillWatch","className","src","backdrop_path","poster_path","alt","title","vote_average","type","onClick","setState","bind","Component","MovieTabs","nextProps","nextState","nextContext","sort_by","updateSortBy","handleClick","value","getClassLink","classnames","Pagination","changePage","num","App","getMovies","fetch","page","then","response","json","data","movies","results","updateMovies","filter","item","id","updateMoviesWillWatch","moviesWillWatch","nextPage","currentPage","prevProps","prevState","snapshot","console","log","map","key","length","ReactDOM","render","document","getElementById"],"mappings":"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","file":"static/js/main.9ab0bc9f.chunk.js","sourcesContent":["import React, {Component} from 'react';\r\n\r\nexport class MovieItem extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            willWatch: false,\r\n        };\r\n    }\r\n\r\n    render() {\r\n        const {\r\n            movie,\r\n            removeMovie,\r\n            addMovieToWillWatch,\r\n            removeMovieFromWillWatch} = this.props;\r\n\r\n        return (\r\n            <div className=\"card\">\r\n                <img\r\n                    className=\"card-img-top\"\r\n                    src={`https://image.tmdb.org/t/p/w500${movie.backdrop_path ||\r\n                    movie.poster_path}`}\r\n                    alt=\"\"\r\n                />\r\n                <div className=\"card-body\">\r\n                    <h6 className=\"card-title\">{movie.title}</h6>\r\n                    <div className=\"d-flex justify-content-between align-items-center\">\r\n                        <p className=\"mb-0\">Rating: {movie.vote_average}</p>\r\n                        {/*{this.state.willWatch ? (\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-success\"\r\n                                onClick={() => {\r\n                                    this.setState({\r\n                                        willWatch: false,\r\n                                    });\r\n                                    removeMovieFromWillWatch(movie);\r\n                                }}\r\n                            >\r\n                                Remove Will Watch\r\n                            </button>\r\n                        ) : (\r\n                            <button\r\n                                type=\"button\"\r\n                                className=\"btn btn-secondary\"\r\n                                onClick={() => {\r\n                                    this.setState({\r\n                                        willWatch: true,\r\n                                    });\r\n                                    addMovieToWillWatch(movie);\r\n                                }}\r\n                            >\r\n                                Add Will Watch\r\n                            </button>\r\n                        )}*/}\r\n\r\n                        {/*\r\n                        Попытался из двух кнопок сделать одну, но в консоли вылетает вот эта строка - ./src/components/MovieItem.jsx\r\n                        Line 70:33:  Nested block is redundant  no-lone-блочкс\r\n                        Не знаю что с этим делать (((\r\n                        */}\r\n\r\n                        <button\r\n                            type=\"button\"\r\n                            className={this.state.willWatch ? \"btn btn-success\" : \"btn btn-secondary\"}\r\n                            onClick={() => {\r\n                                this.setState({\r\n                                    willWatch: !this.state.willWatch,\r\n                                });\r\n                                // eslint-disable-next-line\r\n                                {this.state.willWatch ? removeMovieFromWillWatch(movie) : addMovieToWillWatch(movie)}\r\n                            }}\r\n                        >\r\n                            {this.state.willWatch ? \"Remove Will Watch\" : \"Add Will Watch\"}\r\n                        </button>\r\n\r\n                    </div>\r\n                    <button onClick={removeMovie.bind(null, movie)}>Delete movie</button>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}","import React, {Component} from 'react';\r\nimport classnames from 'classnames';\r\n\r\nexport class MovieTabs extends Component {\r\n\r\n    shouldComponentUpdate(nextProps, nextState, nextContext) {\r\n\r\n        // if(nextProps.sort_by !== this.props.sort_by) {\r\n        //     return true;\r\n        // } else {\r\n        //     return false;\r\n        // }\r\n\r\n        // Эта запись равнозначна записи в комментарии выше.\r\n        return nextProps.sort_by !== this.props.sort_by;\r\n    }\r\n\r\n    render() {\r\n        const {sort_by, updateSortBy} = this.props;\r\n\r\n        // const handleClick = value => {\r\n        //     return () => {\r\n        //         updateSortBy(value);\r\n        //     };\r\n        // };\r\n\r\n        // Эта запись равнозначна записи в комментарии выше.\r\n        const handleClick = value => () => {\r\n            updateSortBy(value);\r\n        };\r\n\r\n        const getClassLink = value => {\r\n            // Не уверен что это правильное решение, но ничего другого не смог придумать.\r\n            return classnames('btn nav-link', {'active': sort_by === value});\r\n            // return `btn nav-link ${sort_by === value ? \"active\" : \"\"}`\r\n        };\r\n\r\n        return (\r\n            <ul className=\"tabs nav nav-pills\">\r\n                <li className=\"nav-item\">\r\n                    <div\r\n                        // className={`nav-link ${\r\n                        //     sort_by === \"popularity.desc\" ? \"active\" : \"\"\r\n                        // }`}\r\n                        className={getClassLink(\"popularity.desc\")}\r\n                        onClick={handleClick(\"popularity.desc\")}\r\n                    >\r\n                        Popularity desc\r\n                    </div>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                    <div\r\n                        // className={`nav-link ${\r\n                        //     sort_by === \"revenue.desc\" ? \"active\" : \"\"\r\n                        // }`}\r\n                        className={getClassLink(\"revenue.desc\")}\r\n                        onClick={handleClick(\"revenue.desc\")}\r\n                    >\r\n                        Revenue desc\r\n                    </div>\r\n                </li>\r\n                <li className=\"nav-item\">\r\n                    <div\r\n                        // className={`nav-link ${\r\n                        //     sort_by === \"vote_average.desc\" ? \"active\" : \"\"\r\n                        // }`}\r\n                        className={getClassLink(\"vote_count.desc\")}\r\n                        onClick={handleClick(\"vote_count.desc\")}\r\n                    >\r\n                        Vote count desc\r\n                    </div>\r\n                </li>\r\n            </ul>\r\n        )\r\n    }\r\n}\r\n","import React from 'react';\r\n\r\nexport const Pagination = ({changePage}) => {\r\n\r\n    const handleClick = num => () => {\r\n        changePage(num);\r\n    };\r\n\r\n    return (<>\r\n        <button onClick={handleClick(-1)} className=\"m-3\">Prev</button>\r\n        <button onClick={handleClick(1)} className=\"m-3\">Next</button>\r\n    </>)\r\n};","import React, {Component} from 'react';\r\n// import {moviesData} from '../moviesData';\r\nimport {MovieItem} from './MovieItem';\r\nimport {API_URL, API_KEY_3} from '../api/api';\r\nimport {MovieTabs} from './MovieTabs';\r\nimport {Pagination} from './Pagination';\r\n\r\nclass App extends Component {\r\n    constructor(props) {\r\n        super(props);\r\n\r\n        this.state = {\r\n            movies: [],\r\n            moviesWillWatch: [],\r\n            sort_by: \"popularity.desc\",\r\n            page: 1,\r\n        };\r\n    }\r\n\r\n    componentDidMount() {\r\n        this.getMovies();\r\n    }\r\n\r\n    componentDidUpdate(prevProps, prevState, snapshot) {\r\n\r\n        if (prevState.sort_by !== this.state.sort_by) {\r\n            this.getMovies();\r\n        }\r\n\r\n        if (prevState.page !== this.state.page) {\r\n            this.getMovies();\r\n            console.log(this.state.page);\r\n        }\r\n    }\r\n\r\n    getMovies = () => {\r\n        fetch(`${API_URL}/discover/movie?api_key=${API_KEY_3}&sort_by=${this.state.sort_by}&page=${this.state.page}`)\r\n            .then((response) => {\r\n                return response.json()\r\n            })\r\n            .then((data) => {\r\n                this.setState({\r\n                    movies: data.results,\r\n                })\r\n            })\r\n    };\r\n\r\n    removeMovie = (movie) => {\r\n        const updateMovies = this.state.movies.filter(function (item) {\r\n            return item.id !== movie.id;\r\n        });\r\n\r\n        this.setState({\r\n            movies: updateMovies,\r\n        });\r\n\r\n        this.removeMovieFromWillWatch(movie);\r\n    };\r\n\r\n    addMovieToWillWatch = movie => {\r\n\r\n        // const updateMoviesWillWatch = [...this.state.moviesWillWatch];\r\n        // updateMoviesWillWatch.push(movie);\r\n        const updateMoviesWillWatch = [...this.state.moviesWillWatch, movie]; // запись равнозначна верхним двум строкам\r\n\r\n        this.setState({\r\n            moviesWillWatch: updateMoviesWillWatch,\r\n        })\r\n    };\r\n\r\n    removeMovieFromWillWatch = (movie) => {\r\n        const updateMoviesWillWatch = this.state.moviesWillWatch.filter(function (item) {\r\n            return item.id !== movie.id;\r\n        });\r\n\r\n        this.setState({\r\n            moviesWillWatch: updateMoviesWillWatch,\r\n        });\r\n    };\r\n\r\n    updateSortBy = value => {\r\n        this.setState({\r\n            sort_by: value,\r\n        });\r\n    };\r\n\r\n    changePage = (num) => {\r\n        let currentPage = this.state.page;\r\n        let nextPage;\r\n\r\n        if (currentPage === 1 && num === -1) {\r\n            nextPage = 500;\r\n        } else if (currentPage === 500 && num === 1) {\r\n            nextPage = 1;\r\n        } else {\r\n            nextPage = currentPage + num;\r\n        }\r\n\r\n        this.setState({\r\n            page: nextPage,\r\n        });\r\n    };\r\n\r\n    render() {\r\n        return (\r\n            <div className=\"container\">\r\n                <div className=\"row\">\r\n                    <div className=\"col-9\">\r\n                        <div className=\"row mb-4\">\r\n                            <div className=\"col-12\">\r\n                                <MovieTabs\r\n                                    sort_by={this.state.sort_by}\r\n                                    updateSortBy={this.updateSortBy}\r\n                                />\r\n                            </div>\r\n                        </div>\r\n                        <div className=\"row\">\r\n                            {this.state.movies.map((movie) => {\r\n                                return (\r\n                                    <div className=\"col-6 mb-4\" key={movie.id}>\r\n                                        <MovieItem\r\n                                            movie={movie}\r\n                                            removeMovie={this.removeMovie}\r\n                                            addMovieToWillWatch={this.addMovieToWillWatch}\r\n                                            removeMovieFromWillWatch={this.removeMovieFromWillWatch}\r\n                                        />\r\n                                    </div>\r\n                                );\r\n                            })}\r\n                        </div>\r\n\r\n                        <div className=\"row\">\r\n                            <div className=\"m-auto\">\r\n                                <Pagination changePage={this.changePage} />\r\n                            </div>\r\n                        </div>\r\n                    </div>\r\n                    <div className=\"col-3\">\r\n                        <p className=\"text-danger\">Will Watch: {this.state.moviesWillWatch.length}</p>\r\n                    </div>\r\n                </div>\r\n            </div>\r\n        );\r\n    }\r\n}\r\n\r\nexport default App;\r\n","export const API_URL = \"https://api.themoviedb.org/3\";\r\n\r\nexport const API_KEY_3 = \"3f4ca4f3a9750da53450646ced312397\";","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport App from './components/App';\r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n"],"sourceRoot":""}